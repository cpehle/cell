mod test = {

  var clk : bool
  var reset : bool
  var ctr : int
  var state : int


  def __init__() = {
    state = 1;
    ctr = 0;
    reset = true;
    clk = false;
  }

  periodic(2 ns) = {
    clk = !clk;
  }

  once(10 ns) = {
    reset = false;
  }

  /*recurrent(t) = {*/
    /*t + 10 ns;*/
  /*}*/

  process = {
    if( reset ) {
      state = 1;
    } else if( @clk ) {
      if( clk ) {
        if( state == 1 ) {
          state = 2;
        } else if( state == 2 ) {
          if( ctr == 10 ) {
            state = 3;
          }
        }
      }
    }
  }


  process = {
    if( reset ) {
      ctr = 0;
    } else if( @clk ) {
      if( clk ) {
        if( state == 2 ) {
          ctr = ctr + 1;
        }
      }
    }
  }


}
